<div class="detail-container" *ngIf="debt; else loading">
  <mat-card class="detail-card">
    <mat-card-header>
      <mat-card-title>{{ debt.description }}</mat-card-title>
      <mat-card-subtitle>
        <mat-chip [color]="debt.isPaid ? 'primary' : 'warn'" selected>
          {{ debt.isPaid ? 'Pagada' : 'Pendiente' }}
        </mat-chip>
      </mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <div class="debt-info">
        <div class="info-item">
          <mat-icon>attach_money</mat-icon>
          <div>
            <h4>Monto</h4>
            <p class="amount" [class.paid]="debt.isPaid">
              {{ debt.amount | currency:'USD':'symbol':'1.2-2' }}
            </p>
          </div>
        </div>
        
        <div class="info-item">
          <mat-icon>event</mat-icon>
          <div>
            <h4>Fecha de creaci√≥n</h4>
            <p>{{ debt.createdAt | date:'dd/MM/yyyy HH:mm' }}</p>
          </div>
        </div>
        
        <div class="info-item" *ngIf="debt.isPaid">
          <mat-icon>check_circle</mat-icon>
          <div>
            <h4>Estado</h4>
            <p>Deuda saldada completamente</p>
          </div>
        </div>
      </div>
    </mat-card-content>
    
    <mat-card-actions>
      <button mat-button (click)="goBack()">
        <mat-icon>arrow_back</mat-icon>
        Volver
      </button>
      
      <div class="actions-right">
        <button mat-button color="primary" (click)="editDebt()" 
                *ngIf="!debt.isPaid">
          <mat-icon>edit</mat-icon>
          Editar
        </button>
        
        <button mat-raised-button color="accent" (click)="payDebt()" 
                *ngIf="!debt.isPaid" [disabled]="payingDebt">
          <mat-spinner diameter="20" *ngIf="payingDebt"></mat-spinner>
          <mat-icon *ngIf="!payingDebt">payment</mat-icon>
          Marcar como pagada
        </button>
        
        <button mat-button color="warn" (click)="deleteDebt()" 
                *ngIf="!debt.isPaid">
          <mat-icon>delete</mat-icon>
          Eliminar
        </button>
      </div>
    </mat-card-actions>
  </mat-card>
</div>

<ng-template #loading>
  <div class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Cargando deuda...</p>
  </div>
</ng-template>
